Init()

APATH = joinpath('arch', kconfig.SRCARCH)
ADIR = Dir(APATH)

export(ADIR=ADIR)

include('kernel')
include(APATH)

KLINKFLAGS = ['-nostdlib', '--entry=main', '--section-start=.text=0xFF000000']

add_flags(kenv, LINKFLAGS=KLINKFLAGS)
kenv.Program(target='chronos.o', source=kobj['y'])
